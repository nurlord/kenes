<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://unpkg.com/embla-carousel/embla-carousel.umd.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@300..800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="reset.css" />
    <link rel="stylesheet" href="styles.css" />
    <title>BUSINESS KEÑES</title>

    <script src="https://unpkg.com/i18next@23.11.5/dist/umd/i18next.js"></script>
    <script src="https://unpkg.com/i18next-http-backend@2.6.2/i18nextHttpBackend.min.js"></script>
    <script src="https://unpkg.com/i18next-browser-languagedetector@7.2.0/i18nextBrowserLanguageDetector.min.js"></script>
  </head>
  <body>
    <!-- Header (transparent, over hero) -->
    <header class="site-header">
      <div class="header-bar">
        <a class="brand" href="#"
          ><img src="img/logo.svg" class="logo" alt="BUSINESS KEÑES logo"
        /></a>

        <nav class="nav-wrap" aria-label="Primary">
          <ul class="nav">
            <li><a href="#" data-i18n="nav.home"></a></li>
            <li><a href="#team" data-i18n="nav.team"></a></li>
            <li><a href="#publications" data-i18n="nav.publications"></a></li>
            <li><a href="#contact" data-i18n="nav.contacts"></a></li>
          </ul>
        </nav>

        <div class="lang-switch" role="group" aria-label="Language">
          <button
            type="button"
            class="lang-btn"
            data-set-lng="en"
            aria-pressed="false"
          >
            EN
          </button>
          <button
            type="button"
            class="lang-btn"
            data-set-lng="ru"
            aria-pressed="false"
          >
            RU
          </button>
          <button
            type="button"
            class="lang-btn"
            data-set-lng="kz"
            aria-pressed="false"
          >
            KZ
          </button>
        </div>
        <a
          class="btn btn--light contact-btn"
          href="#contact"
          data-i18n="nav.getInTouch"
        ></a>
      </div>
    </header>

    <main>
      <!-- Hero -->
      <section class="hero">
        <div class="hero__panel">
          <div class="badge" data-i18n="hero.badge"></div>
          <h1 class="h1" data-i18n="hero.title"></h1>
          <p class="kicker" data-i18n="hero.kicker"></p>
          <p class="desc" data-i18n="hero.desc"></p>
          <button
            class="btn"
            style="max-width: 300px; padding: 8px 16px; border-radius: 4px"
          >
            <a href="#contact" data-i18n="hero.cta"></a>
          </button>
        </div>

        <div class="hero__media" aria-hidden="true">
          <img src="img/bayterek.png" alt="" />
        </div>
        <div class="scroll-down" aria-hidden="true">
          <span>↓</span>
        </div>
      </section>

      <!-- About -->
      <section class="panel-light" id="about">
        <div class="container">
          <h2 class="center" data-i18n="about.title"></h2>
          <p class="lead center" data-i18n="about.lead"></p>
        </div>
      </section>

      <!-- Principles -->
      <section class="panel-dark">
        <div class="container">
          <p class="eyebrow center" data-i18n="principles.eyebrow"></p>
          <blockquote
            class="quote center"
            data-i18n="principles.quote"
          ></blockquote>
        </div>
      </section>

      <section class="team" id="team">
        <div class="container">
          <h2 class="h2" data-i18n="team.title"></h2>

          <div class="embla" id="teamEmbla">
            <div class="embla__viewport">
              <div class="embla__container">
                <!-- Slides -->
                <div class="embla__slide person">
                  <div class="person__photo">
                    <img src="img/aray.png" alt="Ms. Aray Kasabekova" />
                  </div>
                  <h3 class="person__name" data-i18n="team.aray.name"></h3>
                  <span class="person__role" data-i18n="team.aray.role"></span>
                  <p class="person__bio" data-i18n="team.aray.bio"></p>
                </div>

                <div class="embla__slide person">
                  <div class="person__photo">
                    <img src="img/roman.png" alt="Mr. Roman Romashkin" />
                  </div>
                  <h3 class="person__name" data-i18n="team.roman.name"></h3>
                  <span class="person__role" data-i18n="team.roman.role"></span>
                  <p class="person__bio" data-i18n="team.roman.bio"></p>
                </div>

                <div class="embla__slide person">
                  <div class="person__photo">
                    <img src="img/saltanat.png" alt="Ms. Saltanat Jambylbek" />
                  </div>
                  <h3 class="person__name" data-i18n="team.saltanat.name"></h3>
                  <span
                    class="person__role"
                    data-i18n="team.saltanat.role"
                  ></span>
                  <p class="person__bio" data-i18n="team.saltanat.bio"></p>
                </div>

                <div class="embla__slide person">
                  <div class="person__photo">
                    <img src="img/asiya.png" alt="Ms. Asiya Ashigaliyeva" />
                  </div>
                  <h3 class="person__name" data-i18n="team.asiya.name"></h3>
                  <span class="person__role" data-i18n="team.asiya.role"></span>
                  <p class="person__bio" data-i18n="team.asiya.bio"></p>
                </div>
              </div>
            </div>

            <!-- arrows (desktop/tablet) -->
            <button
              class="embla__button embla__button--prev"
              aria-label="Previous"
            >
              ‹
            </button>
            <button class="embla__button embla__button--next" aria-label="Next">
              ›
            </button>

            <!-- dots (mobile) -->
            <div class="embla__dots" aria-label="Slide navigation"></div>
          </div>
        </div>
      </section>
      <!-- Blog -->
      <section class="blog" id="publications">
        <div class="container">
          <h2 class="h2" data-i18n="blog.title"></h2>
          <div class="blog-grid">
            <article class="card">
              <div class="card__media"><img src="img/img1.png" alt="" /></div>
              <h3 class="card__title" data-i18n="blog.card1.title"></h3>
              <p class="card__text" data-i18n="blog.card1.text"></p>
              <div class="card__meta">
                <time datetime="2023-08-09">09.08.2023</time>
                <a href="#" class="chip" data-i18n="blog.readMore"></a>
              </div>
            </article>

            <article class="card">
              <div class="card__media"><img src="img/img2.png" alt="" /></div>
              <h3 class="card__title" data-i18n="blog.card2.title"></h3>
              <p class="card__text" data-i18n="blog.card2.text"></p>
              <div class="card__meta">
                <time datetime="2023-08-09">09.08.2023</time>
                <a href="#" class="chip" data-i18n="blog.readMore"></a>
              </div>
            </article>

            <article class="card">
              <div class="card__media"><img src="img/img3.png" alt="" /></div>
              <h3 class="card__title" data-i18n="blog.card3.title"></h3>
              <p class="card__text" data-i18n="blog.card3.text"></p>
              <div class="card__meta">
                <time datetime="2023-08-09">09.08.2023</time>
                <a href="#" class="chip" data-i18n="blog.readMore"></a>
              </div>
            </article>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <div class="footer-left">
          <img
            class="footer-logo"
            src="img/logo.svg"
            style="height: 100px"
            alt="BUSINESS KEÑES"
          />
          <ul class="footer-nav">
            <li><a href="#" data-i18n="nav.home"></a></li>
            <li><a href="#team" data-i18n="nav.team"></a></li>
            <li><a href="#publications" data-i18n="nav.publications"></a></li>
          </ul>
        </div>

        <div class="footer-right">
          <p class="footer-lead" data-i18n="footer.lead"></p>
          <form
            class="subscribe"
            id="contact"
            action="https://formspree.io/f/myzbbver"
            method="POST"
          >
            <label for="email" data-i18n="form.emailLabel"></label>
            <input
              name="email"
              spellcheck="false"
              type="email"
              aria-label="Email"
              data-i18n-placeholder="form.emailPlaceholder"
              data-i18n-aria-label="form.emailAria"
            />
            <label>
              <label for="message" data-i18n="form.messageLabel"></label>
              <textarea
                id="message"
                name="message"
                data-i18n-placeholder="form.messagePlaceholder"
                data-i18n-aria-label="form.messageAria"
              ></textarea>
            </label>
            <button class="btn" type="submit" data-i18n="form.submit"></button>
          </form>
          <div class="socials" aria-label="Social links">
            <a href="#" aria-label="Facebook">
              <img src="img/facebook.svg" />
            </a>
            <a href="#" aria-label="Instagram">
              <img src="img/instagram.svg" />
            </a>
            <a href="#" aria-label="YouTube">
              <img src="img/youtube.svg" />
            </a>
            <a href="#" aria-label="LinkedIn">
              <img src="img/linkedin.svg" />
            </a>

            <a href="#" aria-label="telegram">
              <img src="img/telegram.svg" />
            </a>
          </div>
        </div>
      </div>
    </footer>
    <script>
      (function () {
        const root = document.getElementById("teamEmbla");
        const viewport = root.querySelector(".embla__viewport");
        const prevBtn = root.querySelector(".embla__button--prev");
        const nextBtn = root.querySelector(".embla__button--next");
        const dotsWrap = root.querySelector(".embla__dots");

        const embla = EmblaCarousel(viewport, {
          align: "start",
          containScroll: "trimSnaps",
          loop: false,
          dragFree: false,
        });

        // ----- Arrows
        const setBtnState = () => {
          prevBtn.toggleAttribute("disabled", !embla.canScrollPrev());
          nextBtn.toggleAttribute("disabled", !embla.canScrollNext());
          prevBtn.classList.toggle("is-disabled", !embla.canScrollPrev());
          nextBtn.classList.toggle("is-disabled", !embla.canScrollNext());
        };
        prevBtn.addEventListener("click", embla.scrollPrev, { passive: true });
        nextBtn.addEventListener("click", embla.scrollNext, { passive: true });

        // ----- Dots
        let dots = [];
        function buildDots() {
          dotsWrap.innerHTML = "";
          dots = embla.scrollSnapList().map((_, i) => {
            const b = document.createElement("button");
            b.type = "button";
            b.className = "embla__dot";
            b.setAttribute("aria-label", `Go to slide ${i + 1}`);
            b.addEventListener("click", () => embla.scrollTo(i));
            dotsWrap.appendChild(b);
            return b;
          });
          selectDot(embla.selectedScrollSnap());
        }
        function selectDot(index) {
          dots.forEach((d, i) => {
            d.classList.toggle("is-selected", i === index);
            if (i === index) d.setAttribute("aria-current", "true");
            else d.removeAttribute("aria-current");
          });
        }

        // ----- Wire events
        embla.on("init", () => {
          buildDots();
          setBtnState();
        });
        embla.on("reInit", () => {
          buildDots();
          setBtnState();
        });
        embla.on("select", () => {
          selectDot(embla.selectedScrollSnap());
          setBtnState();
        });

        // Keyboard arrows when focused/hovered (optional)
        root.addEventListener("keydown", (e) => {
          if (e.key === "ArrowLeft") embla.scrollPrev();
          if (e.key === "ArrowRight") embla.scrollNext();
        });
      })();
    </script>
    <script>
      i18next
        .use(i18nextHttpBackend)
        .use(i18nextBrowserLanguageDetector)
        .init(
          {
            fallbackLng: "en",
            debug: false,
            backend: {
              loadPath: "/locales/{{lng}}/translation.json", // adjust path if needed
            },
            detection: {
              order: ["querystring", "localStorage", "navigator"],
              lookupQuerystring: "lng",
            },
          },
          () => updateContent(),
        );

      function updateContent() {
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          el.innerHTML = i18next.t(el.getAttribute("data-i18n"));
        });
        document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
          el.setAttribute(
            "placeholder",
            i18next.t(el.getAttribute("data-i18n-placeholder")),
          );
        });
        document.querySelectorAll("[data-i18n-aria-label]").forEach((el) => {
          el.setAttribute(
            "aria-label",
            i18next.t(el.getAttribute("data-i18n-aria-label")),
          );
        });
      }

      i18next.on("languageChanged", updateContent);

      // Optional tiny language switcher (add two small buttons anywhere):
      // <div class="lang"><button data-set-lng="en">EN</button><button data-set-lng="ru">RU</button></div>
      document.addEventListener("click", (e) => {
        const btn = e.target.closest("[data-set-lng]");
        if (!btn) return;
        i18next.changeLanguage(btn.getAttribute("data-set-lng"));
        localStorage.setItem("i18nextLng", btn.getAttribute("data-set-lng"));
      });
      function setActiveLangUI(lng) {
        const current = (lng || "en").split("-")[0];
        document.documentElement.setAttribute("lang", current);

        document.querySelectorAll(".lang-btn").forEach((btn) => {
          const isActive = btn.dataset.setLng === current;
          btn.classList.toggle("is-active", isActive);
          btn.setAttribute("aria-pressed", isActive ? "true" : "false");
        });
      }

      // Click to change language
      document.addEventListener("click", (e) => {
        const btn = e.target.closest(".lang-btn");
        if (!btn) return;
        const lng = btn.getAttribute("data-set-lng");
        i18next.changeLanguage(lng); // triggers 'languageChanged'
        localStorage.setItem("i18nextLng", lng); // persist
      });

      // When i18next changes, update text + UI
      i18next.on("languageChanged", (lng) => {
        if (typeof updateContent === "function") updateContent();
        setActiveLangUI(lng);
      });

      // On first load, reflect current language choice
      document.addEventListener("DOMContentLoaded", () => {
        const initial =
          i18next.language || localStorage.getItem("i18nextLng") || "en";
        setActiveLangUI(initial);
      });
    </script>
  </body>
</html>
